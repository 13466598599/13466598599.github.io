{"meta":{"title":"ä»»ä¿Šè¾¾çš„æŠ€æœ¯åšå®¢","subtitle":"","description":"","author":"ä»»ä¿Šè¾¾","url":"https://renjunda.ren","root":"/"},"pages":[{"title":"BuyMeTea","date":"2002-04-01T01:23:02.000Z","updated":"2022-04-01T01:34:20.789Z","comments":true,"path":"money.html","permalink":"https://renjunda.ren/money.html","excerpt":"","text":"è¯·æˆ‘å–èŒ¶"},{"title":"about","date":"2021-03-31T03:44:31.000Z","updated":"2022-07-01T10:04:51.744Z","comments":true,"path":"PY.html","permalink":"https://renjunda.ren/PY.html","excerpt":"","text":"æˆ‘ä»¬ä¼šæ…¢æ…¢é•¿å¤§æˆäººï¼Œéšç€å­£èŠ‚çš„ä¸åœå˜æ¢è·¯è¾¹ç››å¼€çš„é²œèŠ±ä¹Ÿåœ¨ä¸æ–­å˜åŒ–ï¼Œé‚£ä¸ªå­£èŠ‚ç››å¼€çš„é²œèŠ±åˆ°åº•å«ä»€ä¹ˆåå­—ï¼Œè½»è½»æ‘‡æ›³ç€ä¸€æ—¦è§¦æ‘¸å®ƒå°±ä¼šè½»è½»åœ°è¢«æ‰åˆ°ï¼Œç”¨é¼»å­é è¿‘é—»ä¸€é—»ï¼Œä¼šæœ‰ä¸€è‚¡æ·¡æ·¡çš„é’æ¶©å¤ªé˜³çš„èŠ³é¦™ï¼Œéšç€é‚£è‚¡é¦™å‘³æ…¢æ…¢å˜æ·¡æˆ‘ä»¬ä¹Ÿåœ¨é•¿å¤§æˆäººï¼Œä½†æ˜¯é‚£æœµèŠ±ä¸€å®šä¼šåœ¨æŸå¤„ç»§ç»­ç››å¼€ã€‚ æˆ‘çš„æœ‹å‹"},{"title":"about","date":"2021-03-31T03:44:31.000Z","updated":"2022-10-31T01:42:11.798Z","comments":true,"path":"about.html","permalink":"https://renjunda.ren/about.html","excerpt":"","text":"æˆ‘çš„ç”»åƒæˆ‘æ˜¯ä¸ç†æ€§çš„ã€æ‡’æƒ°çš„ã€ä»…å‡­çƒ­çˆ±é©±åŠ¨çš„ã€åæ‰§çš„ã€ä¿¡ä»°ç§‘å­¦çš„ã€å–œæ¬¢æ¢ç´¢çš„ã€çƒ­çˆ±ç”Ÿå‘½çš„ã€å‘å¾€é˜³å…‰çš„ã€‚ æˆ‘å¬çš„éŸ³ä¹è€æ¸”å¤«å¿«ä¹åƒè™¾ç±³ - ç”¨æˆ· - ç½‘æ˜“äº‘éŸ³ä¹(163.com) æˆ‘çš„å¾®ä¿¡"}],"posts":[{"title":"Pythonæ“ä½œMySQLå¦‚ä½•è·å–æ’å…¥æ•°æ®çš„ä¸»é”®id","slug":"pymysqlä¸»é”®æ“ä½œ","date":"2023-01-12T01:18:15.000Z","updated":"2023-01-12T01:24:46.067Z","comments":true,"path":"lxb/ab8b976.html","link":"","permalink":"https://renjunda.ren/lxb/ab8b976.html","excerpt":"","text":"è·å–æ’å…¥æ•°æ®çš„ä¸»é”®id12345678910111213141516import pymysql database = pymysql.connect( host=&quot;127.0.0.1&quot;, port=3306, user=&quot;root&quot;, password=&quot;root&quot;, database=&quot;test&quot;)cursor = database.cursor() for i in range(5): cursor.execute(&#x27;insert into test (name) values (&quot;test&quot;)&#x27;) print(database.insert_id()) database.commit() cursor.close()database.close() é€šè¿‡db.insert_id()æ–¹æ³•å¯ä»¥è·å–æ’å…¥æ•°æ®çš„ä¸»é”®id, æ³¨æ„ä¸€å®šè¦åœ¨commitä¹‹å‰è·å–,å¦åˆ™è¿”å›0ã€‚","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://renjunda.ren/tags/Python/"}]},{"title":"pythonçº¿ç¨‹æ± åŠå…¶å·¥ä½œåŸç†","slug":"pythonçº¿ç¨‹","date":"2023-01-01T00:16:12.000Z","updated":"2023-01-12T01:21:20.982Z","comments":true,"path":"lxb/7fe8f015.html","link":"","permalink":"https://renjunda.ren/lxb/7fe8f015.html","excerpt":"","text":"ç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠä¸æ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥å¾ˆå¥½åœ°æå‡æ€§èƒ½ï¼Œå°¤å…¶æ˜¯å½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œæ›´åº”è¯¥è€ƒè™‘ä½¿ç”¨çº¿ç¨‹æ± ã€‚ çº¿ç¨‹æ± åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å³åˆ›å»ºå¤§é‡ç©ºé—²çš„çº¿ç¨‹ï¼Œç¨‹åºåªè¦å°†ä¸€ä¸ªå‡½æ•°æäº¤ç»™çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªç©ºé—²çš„çº¿ç¨‹æ¥æ‰§è¡Œå®ƒã€‚å½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œè¯¥çº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­å˜æˆç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚ æ­¤å¤–ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶ç³»ç»Ÿä¸­å¹¶å‘çº¿ç¨‹çš„æ•°é‡ã€‚å½“ç³»ç»Ÿä¸­åŒ…å«æœ‰å¤§é‡çš„å¹¶å‘çº¿ç¨‹æ—¶ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œç”šè‡³å¯¼è‡´ Python è§£é‡Šå™¨å´©æºƒï¼Œè€Œçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°å‚æ•°å¯ä»¥æ§åˆ¶ç³»ç»Ÿä¸­å¹¶å‘çº¿ç¨‹çš„æ•°é‡ä¸è¶…è¿‡æ­¤æ•°ã€‚ çº¿ç¨‹æ± çš„ä½¿ç”¨çº¿ç¨‹æ± çš„åŸºç±»æ˜¯ concurrent.futures æ¨¡å—ä¸­çš„ Executorï¼ŒExecutor æä¾›äº†ä¸¤ä¸ªå­ç±»ï¼Œå³ ThreadPoolExecutor å’Œ ProcessPoolExecutorï¼Œå…¶ä¸­ ThreadPoolExecutor ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè€Œ ProcessPoolExecutor ç”¨äºåˆ›å»ºè¿›ç¨‹æ± ã€‚ å¦‚æœä½¿ç”¨çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± æ¥ç®¡ç†å¹¶å‘ç¼–ç¨‹ï¼Œé‚£ä¹ˆåªè¦å°†ç›¸åº”çš„ task å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±ç”±çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± æ¥æå®šã€‚ Exectuor æä¾›äº†å¦‚ä¸‹å¸¸ç”¨æ–¹æ³•ï¼š submit(fn, *args, *kwargs)ï¼šå°† fn å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± ã€‚args ä»£è¡¨ä¼ ç»™ fn å‡½æ•°çš„å‚æ•°ï¼Œ*kwargs ä»£è¡¨ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¸º fn å‡½æ•°ä¼ å…¥å‚æ•°ã€‚ map(func, *iterables, timeout&#x3D;None, chunksize&#x3D;1)ï¼šè¯¥å‡½æ•°ç±»ä¼¼äºå…¨å±€å‡½æ•° map(func, *iterables)ï¼Œåªæ˜¯è¯¥å‡½æ•°å°†ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œä»¥å¼‚æ­¥æ–¹å¼ç«‹å³å¯¹ iterables æ‰§è¡Œ map å¤„ç†ã€‚ shutdown(wait&#x3D;True)ï¼šå…³é—­çº¿ç¨‹æ± ã€‚ ç¨‹åºå°† task å‡½æ•°æäº¤ï¼ˆsubmitï¼‰ç»™çº¿ç¨‹æ± åï¼Œsubmit æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Future å¯¹è±¡ï¼ŒFuture ç±»ä¸»è¦ç”¨äºè·å–çº¿ç¨‹ä»»åŠ¡å‡½æ•°çš„è¿”å›å€¼ã€‚ç”±äºçº¿ç¨‹ä»»åŠ¡ä¼šåœ¨æ–°çº¿ç¨‹ä¸­ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œå› æ­¤ï¼Œçº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°ç›¸å½“äºä¸€ä¸ªâ€œå°†æ¥å®Œæˆâ€çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ Python ä½¿ç”¨ Future æ¥ä»£è¡¨ã€‚ 1å®é™…ä¸Šï¼Œåœ¨ Java çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­åŒæ ·æœ‰ Futureï¼Œæ­¤å¤„çš„ Future ä¸ Java çš„ Future å¤§åŒå°å¼‚ã€‚ Future æä¾›äº†å¦‚ä¸‹æ–¹æ³•ï¼š cancel()ï¼šå–æ¶ˆè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡ã€‚å¦‚æœè¯¥ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œä¸å¯å–æ¶ˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Falseï¼›å¦åˆ™ï¼Œç¨‹åºä¼šå–æ¶ˆè¯¥ä»»åŠ¡ï¼Œå¹¶è¿”å› Trueã€‚ cancelled()ï¼šè¿”å› Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ˜¯å¦è¢«æˆåŠŸå–æ¶ˆã€‚ running()ï¼šå¦‚æœè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ­£åœ¨æ‰§è¡Œã€ä¸å¯è¢«å–æ¶ˆï¼Œè¯¥æ–¹æ³•è¿”å› Trueã€‚ done()ï¼šå¦‚æœè¯¥ Funture ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡è¢«æˆåŠŸå–æ¶ˆæˆ–æ‰§è¡Œå®Œæˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Trueã€‚ result(timeout&#x3D;None)ï¼šè·å–è¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æœ€åè¿”å›çš„ç»“æœã€‚å¦‚æœ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡è¿˜æœªå®Œæˆï¼Œè¯¥æ–¹æ³•å°†ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå…¶ä¸­ timeout å‚æ•°æŒ‡å®šæœ€å¤šé˜»å¡å¤šå°‘ç§’ã€‚ exception(timeout&#x3D;None)ï¼šè·å–è¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ‰€å¼•å‘çš„å¼‚å¸¸ã€‚å¦‚æœè¯¥ä»»åŠ¡æˆåŠŸå®Œæˆï¼Œæ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Noneã€‚ add_done_callback(fn)ï¼šä¸ºè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ³¨å†Œä¸€ä¸ªâ€œå›è°ƒå‡½æ•°â€ï¼Œå½“è¯¥ä»»åŠ¡æˆåŠŸå®Œæˆæ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨è§¦å‘è¯¥ fn å‡½æ•°ã€‚ åœ¨ç”¨å®Œä¸€ä¸ªçº¿ç¨‹æ± åï¼Œåº”è¯¥è°ƒç”¨è¯¥çº¿ç¨‹æ± çš„ shutdown() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯åŠ¨çº¿ç¨‹æ± çš„å…³é—­åºåˆ—ã€‚è°ƒç”¨ shutdown() æ–¹æ³•åçš„çº¿ç¨‹æ± ä¸å†æ¥æ”¶æ–°ä»»åŠ¡ï¼Œä½†ä¼šå°†ä»¥å‰æ‰€æœ‰çš„å·²æäº¤ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚å½“çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåï¼Œè¯¥çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šæ­»äº¡ã€‚ ä½¿ç”¨çº¿ç¨‹æ± æ¥æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡çš„æ­¥éª¤å¦‚ä¸‹ï¼š è°ƒç”¨ ThreadPoolExecutor ç±»çš„æ„é€ å™¨åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚ å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ä½œä¸ºçº¿ç¨‹ä»»åŠ¡ã€‚ è°ƒç”¨ ThreadPoolExecutor å¯¹è±¡çš„ submit() æ–¹æ³•æ¥æäº¤çº¿ç¨‹ä»»åŠ¡ã€‚ å½“ä¸æƒ³æäº¤ä»»ä½•ä»»åŠ¡æ—¶ï¼Œè°ƒç”¨ ThreadPoolExecutor å¯¹è±¡çš„ shutdown() æ–¹æ³•æ¥å…³é—­çº¿ç¨‹æ± ã€‚ ä¸‹é¢ç¨‹åºç¤ºèŒƒäº†å¦‚ä½•ä½¿ç”¨çº¿ç¨‹æ± æ¥æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡: 12345678910111213141516171819202122232425262728from concurrent.futures import ThreadPoolExecutorimport threadingimport time# å®šä¹‰ä¸€ä¸ªå‡†å¤‡ä½œä¸ºçº¿ç¨‹ä»»åŠ¡çš„å‡½æ•°def action(max): my_sum = 0 for i in range(max): print(threading.current_thread().name + &#x27; &#x27; + str(i)) my_sum += i return my_sum# åˆ›å»ºä¸€ä¸ªåŒ…å«2æ¡çº¿ç¨‹çš„çº¿ç¨‹æ± pool = ThreadPoolExecutor(max_workers=2)# å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªtask, 50ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•°future1 = pool.submit(action, 50)# å‘çº¿ç¨‹æ± å†æäº¤ä¸€ä¸ªtask, 100ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•°future2 = pool.submit(action, 100)# åˆ¤æ–­future1ä»£è¡¨çš„ä»»åŠ¡æ˜¯å¦ç»“æŸprint(future1.done())time.sleep(3)# åˆ¤æ–­future2ä»£è¡¨çš„ä»»åŠ¡æ˜¯å¦ç»“æŸprint(future2.done())# æŸ¥çœ‹future1ä»£è¡¨çš„ä»»åŠ¡è¿”å›çš„ç»“æœprint(future1.result())# æŸ¥çœ‹future2ä»£è¡¨çš„ä»»åŠ¡è¿”å›çš„ç»“æœprint(future2.result())# å…³é—­çº¿ç¨‹æ± pool.shutdown() ä¸Šé¢ç¨‹åºä¸­ï¼Œç¬¬ 13 è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ¥ä¸‹æ¥çš„ä¸¤è¡Œä»£ç åªè¦å°† action() å‡½æ•°æäº¤ï¼ˆsubmitï¼‰ç»™çº¿ç¨‹æ± ï¼Œè¯¥çº¿ç¨‹æ± å°±ä¼šè´Ÿè´£å¯åŠ¨çº¿ç¨‹æ¥æ‰§è¡Œ action() å‡½æ•°ã€‚è¿™ç§å¯åŠ¨çº¿ç¨‹çš„æ–¹æ³•æ—¢ä¼˜é›…ï¼Œåˆå…·æœ‰æ›´é«˜çš„æ•ˆç‡ã€‚ å½“ç¨‹åºæŠŠ action() å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± æ—¶ï¼Œsubmit() æ–¹æ³•ä¼šè¿”å›è¯¥ä»»åŠ¡æ‰€å¯¹åº”çš„ Future å¯¹è±¡ï¼Œç¨‹åºç«‹å³åˆ¤æ–­ futurel çš„ done() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¼šè¿”å› Falseï¼ˆè¡¨æ˜æ­¤æ—¶è¯¥ä»»åŠ¡è¿˜æœªå®Œæˆï¼‰ã€‚æ¥ä¸‹æ¥ä¸»ç¨‹åºæš‚åœ 3 ç§’ï¼Œç„¶ååˆ¤æ–­ future2 çš„ done() æ–¹æ³•ï¼Œå¦‚æœæ­¤æ—¶è¯¥ä»»åŠ¡å·²ç»å®Œæˆï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°†ä¼šè¿”å› Trueã€‚ ç¨‹åºæœ€åé€šè¿‡ Future çš„ result() æ–¹æ³•æ¥è·å–ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡è¿”å›çš„ç»“æœã€‚ å½“ç¨‹åºä½¿ç”¨ Future çš„ result() æ–¹æ³•æ¥è·å–ç»“æœæ—¶ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š timeout å‚æ•°ï¼Œå½“å‰çº¿ç¨‹å°†ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ° Future ä»£è¡¨çš„ä»»åŠ¡è¿”å›ã€‚ è·å–æ‰§è¡Œç»“æœå‰é¢ç¨‹åºè°ƒç”¨äº† Future çš„ result() æ–¹æ³•æ¥è·å–çº¿ç¨‹ä»»åŠ¡çš„è¿å›å€¼ï¼Œä½†è¯¥æ–¹æ³•ä¼šé˜»å¡å½“å‰ä¸»çº¿ç¨‹ï¼Œåªæœ‰ç­‰åˆ°é’±ç¨‹ä»»åŠ¡å®Œæˆåï¼Œresult() æ–¹æ³•çš„é˜»å¡æ‰ä¼šè¢«è§£é™¤ã€‚ å¦‚æœç¨‹åºä¸å¸Œæœ›ç›´æ¥è°ƒç”¨ result() æ–¹æ³•é˜»å¡çº¿ç¨‹ï¼Œåˆ™å¯é€šè¿‡ Future çš„ add_done_callback() æ–¹æ³•æ¥æ·»åŠ å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°å½¢å¦‚ fn(future)ã€‚å½“çº¿ç¨‹ä»»åŠ¡å®Œæˆåï¼Œç¨‹åºä¼šè‡ªåŠ¨è§¦å‘è¯¥å›è°ƒå‡½æ•°ï¼Œå¹¶å°†å¯¹åº”çš„ Future å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™è¯¥å›è°ƒå‡½æ•°ã€‚ ä¸‹é¢ç¨‹åºä½¿ç”¨ add_done_callback() æ–¹æ³•æ¥è·å–çº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼ï¼š 123456789101112131415161718192021222324from concurrent.futures import ThreadPoolExecutorimport threadingimport time# å®šä¹‰ä¸€ä¸ªå‡†å¤‡ä½œä¸ºçº¿ç¨‹ä»»åŠ¡çš„å‡½æ•°def action(max): my_sum = 0 for i in range(max): print(threading.current_thread().name + &#x27; &#x27; + str(i)) my_sum += i return my_sum# åˆ›å»ºä¸€ä¸ªåŒ…å«2æ¡çº¿ç¨‹çš„çº¿ç¨‹æ± with ThreadPoolExecutor(max_workers=2) as pool: # å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªtask, 50ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future1 = pool.submit(action, 50) # å‘çº¿ç¨‹æ± å†æäº¤ä¸€ä¸ªtask, 100ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future2 = pool.submit(action, 100) def get_result(future): print(future.result()) # ä¸ºfuture1æ·»åŠ çº¿ç¨‹å®Œæˆçš„å›è°ƒå‡½æ•° future1.add_done_callback(get_result) # ä¸ºfuture2æ·»åŠ çº¿ç¨‹å®Œæˆçš„å›è°ƒå‡½æ•° future2.add_done_callback(get_result) print(&#x27;--------------&#x27;) ä¸Šé¢ä¸»ç¨‹åºåˆ†åˆ«ä¸º future1ã€future2 æ·»åŠ äº†åŒä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨çº¿ç¨‹ä»»åŠ¡ç»“æŸæ—¶è·å–å…¶è¿”å›å€¼ã€‚ ä¸»ç¨‹åºçš„æœ€åä¸€è¡Œä»£ç æ‰“å°äº†ä¸€æ¡æ¨ªçº¿ã€‚ç”±äºç¨‹åºå¹¶æœªç›´æ¥è°ƒç”¨ future1ã€future2 çš„ result() æ–¹æ³•ï¼Œå› æ­¤ä¸»çº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œå¯ä»¥ç«‹å³çœ‹åˆ°è¾“å‡ºä¸»çº¿ç¨‹æ‰“å°å‡ºçš„æ¨ªçº¿ã€‚æ¥ä¸‹æ¥å°†ä¼šçœ‹åˆ°ä¸¤ä¸ªæ–°çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œå½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œget_result() å‡½æ•°è¢«è§¦å‘ï¼Œè¾“å‡ºçº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼ã€‚ å¦å¤–ï¼Œç”±äºçº¿ç¨‹æ± å®ç°äº†ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼ˆContext Manage Protocolï¼‰ï¼Œå› æ­¤ï¼Œç¨‹åºå¯ä»¥ä½¿ç”¨ with è¯­å¥æ¥ç®¡ç†çº¿ç¨‹æ± ï¼Œè¿™æ ·å³å¯é¿å…æ‰‹åŠ¨å…³é—­çº¿ç¨‹æ± ï¼Œå¦‚ä¸Šé¢çš„ç¨‹åºæ‰€ç¤ºã€‚ æ­¤å¤–ï¼ŒExectuor è¿˜æä¾›äº†ä¸€ä¸ª map(func, *iterables, timeout&#x3D;None, chunksize&#x3D;1) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼äºå…¨å±€å‡½æ•° map()ï¼ŒåŒºåˆ«åœ¨äºçº¿ç¨‹æ± çš„ map() æ–¹æ³•ä¼šä¸º iterables çš„æ¯ä¸ªå…ƒç´ å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä»¥å¹¶å‘æ–¹å¼æ¥æ‰§è¡Œ func å‡½æ•°ã€‚è¿™ç§æ–¹å¼ç›¸å½“äºå¯åŠ¨ len(iterables) ä¸ªçº¿ç¨‹ï¼Œäº•æ”¶é›†æ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœã€‚ ä¾‹å¦‚ï¼Œå¦‚ä¸‹ç¨‹åºä½¿ç”¨ Executor çš„ map() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼Œå¹¶æ”¶é›†çº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼ï¼š 123456789101112131415161718from concurrent.futures import ThreadPoolExecutorimport threadingimport time# å®šä¹‰ä¸€ä¸ªå‡†å¤‡ä½œä¸ºçº¿ç¨‹ä»»åŠ¡çš„å‡½æ•°def action(max): my_sum = 0 for i in range(max): print(threading.current_thread().name + &#x27; &#x27; + str(i)) my_sum += i return my_sum# åˆ›å»ºä¸€ä¸ªåŒ…å«4æ¡çº¿ç¨‹çš„çº¿ç¨‹æ± with ThreadPoolExecutor(max_workers=4) as pool: # ä½¿ç”¨çº¿ç¨‹æ‰§è¡Œmapè®¡ç®— # åé¢å…ƒç»„æœ‰3ä¸ªå…ƒç´ ï¼Œå› æ­¤ç¨‹åºå¯åŠ¨3æ¡çº¿ç¨‹æ¥æ‰§è¡Œactionå‡½æ•° results = pool.map(action, (50, 100, 150)) print(&#x27;--------------&#x27;) for r in results: print(r) ä¸Šé¢ç¨‹åºä½¿ç”¨ map() æ–¹æ³•æ¥å¯åŠ¨ 3 ä¸ªçº¿ç¨‹ï¼ˆè¯¥ç¨‹åºçš„çº¿ç¨‹æ± åŒ…å« 4 ä¸ªçº¿ç¨‹ï¼Œå¦‚æœç»§ç»­ä½¿ç”¨åªåŒ…å«ä¸¤ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ­¤æ—¶å°†æœ‰ä¸€ä¸ªä»»åŠ¡å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¿…é¡»ç­‰å…¶ä¸­ä¸€ä¸ªä»»åŠ¡å®Œæˆï¼Œçº¿ç¨‹ç©ºé—²å‡ºæ¥æ‰ä¼šè·å¾—æ‰§è¡Œçš„æœºä¼šï¼‰ï¼Œmap() æ–¹æ³•çš„è¿”å›å€¼å°†ä¼šæ”¶é›†æ¯ä¸ªçº¿ç¨‹ä»»åŠ¡çš„è¿”å›ç»“æœã€‚ è¿è¡Œä¸Šé¢ç¨‹åºï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ° 3 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„ç»“æœï¼Œæœ€åé€šè¿‡ results å¯ä»¥çœ‹åˆ° 3 ä¸ªçº¿ç¨‹ä»»åŠ¡çš„è¿”å›ç»“æœã€‚ é€šè¿‡ä¸Šé¢ç¨‹åºå¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ map() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼Œå¹¶æ”¶é›†çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œä¸ä»…å…·æœ‰ä»£ç ç®€å•çš„ä¼˜ç‚¹ï¼Œè€Œä¸”è™½ç„¶ç¨‹åºä¼šä»¥å¹¶å‘æ–¹å¼æ¥æ‰§è¡Œ action() å‡½æ•°ï¼Œä½†æœ€åæ”¶é›†çš„ action() å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œä¾ç„¶ä¸ä¼ å…¥å‚æ•°çš„ç»“æœä¿æŒä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢ results çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ action(50) çš„ç»“æœï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ action(100) çš„ç»“æœï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ æ˜¯ action(150) çš„ç»“æœã€‚ è¯·åšä¸»å–æ¯èŒ¶å§ â†â€”â€”â€”-è¯·ç‚¹å‡»","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://renjunda.ren/tags/Python/"}]},{"title":"å¦‚ä½•ç”¨pythonå®ç°è‡ªåŠ¨ä¸‹è½½è‡ªå·±æƒ³è¦çš„å›¾ç‰‡?","slug":"å¦‚ä½•ç”¨pythonå®ç°è‡ªåŠ¨ä¸‹è½½è‡ªå·±æƒ³è¦çš„å›¾ç‰‡","date":"2022-08-12T06:14:48.000Z","updated":"2022-08-12T06:37:45.725Z","comments":true,"path":"lxb/dcf0004f.html","link":"","permalink":"https://renjunda.ren/lxb/dcf0004f.html","excerpt":"","text":"å…³äºpythonçˆ¬è™«çš„ä¼˜ç‚¹â€”â€”æ”¯æŒæ¨¡å—å¤šã€ä»£ç ç®€æ´ã€å¼€å‘æ•ˆç‡é«˜ ï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œç½‘ç»œçˆ¬è™«å¯ä»¥é€‰å–çš„å¥½å·¥å…·ã€‚å¯¹äºä¸€ä¸ªä¸ªçš„çˆ¬å–ä¸‹è½½ï¼ŒåŠ¿å¿…ä¼šæ¶ˆè€—æˆ‘ä»¬å¤§é‡çš„æ—¶é—´ï¼Œä½¿ç”¨Pythonçˆ¬è™«å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³å¯ä»¥å®ç°è‡ªåŠ¨ä¸‹è½½ã€‚æœ¬æ–‡å‘å¤§å®¶ä»‹ç»pythonçˆ¬è™«çš„å®æˆ˜ç»ƒä¹ ä¹‹è¿›è¡Œè‡ªåŠ¨ä¸‹è½½å›¾ç‰‡çš„çˆ¬å–è¿‡ç¨‹ã€‚ è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡æµç¨‹ æ€»ç»“ç½‘å€è§„å¾‹ï¼Œä»¥ä¾¿æ ¹æ®ç½‘å€è®¿é—®ç½‘é¡µï¼› æ ¹æ®ç½‘å€è§„å¾‹ï¼Œå¾ªç¯çˆ¬å–å¹¶è¿”å›ç½‘é¡µï¼› åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å¹¶è¿”å›å›¾ç‰‡; çˆ¬å–æ¡ˆä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# -*- coding:utf8 -*-&#x27;&#x27;&#x27; åŠŸèƒ½ä»‹ç»ï¼š åˆ©ç”¨çˆ¬è™«å®ç°å›¾ç‰‡çˆ¬å–,è¾“å…¥ä½ æƒ³æ£€ç´¢çš„å›¾ç‰‡è°ƒç”¨ç™¾åº¦å›¾ç‰‡apiå®ç°æ£€ç´¢,å¹¶ä¸‹è½½æ–‡ä»¶&#x27;&#x27;&#x27;import requestsimport refrom urllib import parseimport osclass BaiduImageSpider(object): def __init__(self): self.url = &#x27;https://image.baidu.com/search/flip?tn=baiduimage&amp;word=&#123;&#125;&#x27; self.headers = &#123;&#x27;User-Agent&#x27;: &#x27;Mozilla/4.0&#x27;&#125; # è·å–å›¾ç‰‡ def get_image(self, url, word): # ä½¿ç”¨ requestsæ¨¡å—å¾—åˆ°å“åº”å¯¹è±¡ res = requests.get(url, headers=self.headers) # æ›´æ”¹ç¼–ç æ ¼å¼ res.encoding = &quot;utf-8&quot; # å¾—åˆ°htmlç½‘é¡µ html = res.text print(html) # æ­£åˆ™è§£æ pattern = re.compile(&#x27;&quot;hoverURL&quot;:&quot;(.*?)&quot;&#x27;, re.S) img_link_list = pattern.findall(html) # å­˜å‚¨å›¾ç‰‡çš„urlé“¾æ¥ print(img_link_list) # åˆ›å»ºç›®å½•ï¼Œç”¨äºä¿å­˜å›¾ç‰‡ directory = &#x27;D:/study_folder/download/&#123;&#125;/&#x27;.format(word) # å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œæ­¤æ–¹æ³•å¸¸ç”¨ if not os.path.exists(directory): os.makedirs(directory) # æ·»åŠ è®¡æ•° i = 1 for img_link in img_link_list: filename = &#x27;&#123;&#125;&#123;&#125;.jpg&#x27;.format(directory, i) self.save_image(img_link, filename) i += 1 # ä¸‹è½½å›¾ç‰‡ def save_image(self, img_link, filename): html = requests.get(url=img_link, headers=self.headers).content with open(filename, &#x27;wb&#x27;) as f: f.write(html) print(filename, &#x27;ä¸‹è½½æˆåŠŸ&#x27;) # å…¥å£å‡½æ•° def run(self): word = input(&quot;æ‚¨æƒ³è¦è°çš„ç…§ç‰‡:&quot;) word_parse = parse.quote(word) url = self.url.format(word_parse) self.get_image(url, word)if __name__ == &#x27;__main__&#x27;: spider = BaiduImageSpider() spider.run() ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨Pythonçˆ¬è™«å®ç°è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡çš„è¿‡ç¨‹ï¼Œä¸ºäº†è§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹ï¼Œå¤§å®¶èµ¶å¿«ç»ƒä¹ èµ·æ¥å“¦~å­¦ä¼šä»¥åè¿˜å¯ä»¥å¾€æ›´æ·±å±‚æ¬¡å­¦å‘¢ï¼Œçˆ¬è™«å¯ä¸æ­¢æ˜¯åªèƒ½è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡å“¦ï¼","categories":[],"tags":[]},{"title":"å‡½æ•°å†…çš„ajaxåŒæ­¥è¯·æ±‚å¯¼è‡´é®ç½©å±‚å¤±æ•ˆã€æˆ–è€…å¯¼è‡´loadingæ­£åœ¨åŠ è½½æç¤ºå¤±æ•ˆé—®é¢˜","slug":"ajaxåŒæ­¥æ‰§è¡Œå¼¹å‡ºå±‚æ‰§è¡Œé¡ºåºæ··ä¹±","date":"2022-08-02T05:57:35.000Z","updated":"2022-10-04T14:15:34.679Z","comments":true,"path":"lxb/416dd1e7.html","link":"","permalink":"https://renjunda.ren/lxb/416dd1e7.html","excerpt":"","text":"åŠŸèƒ½éœ€æ±‚ç¼–å†™ç‚¹å‡»æŒ‰é’®ï¼Œå¼¹å‡ºloadingé®ç½©å±‚æç¤ºæ­£åœ¨åŠ è½½ä¸­â€¦ï¼ŒåŒæ—¶æŸ¥è¯¢åå°ä¿¡æ¯ï¼Œæ‹¼æ¥æ•°æ®åæ¸²æŸ“åˆ°åˆ—è¡¨æ—¶ï¼Œä¸ºäº†ä¿éšœæ¸²æŸ“æ—¶ï¼Œåˆ—è¡¨ä¸­çš„æ•°æ®å·²ç»æ‹¼æ¥å®Œæˆã€‚æ‰€ä»¥åœ¨forå¾ªç¯ä¸­ä½¿ç”¨åŒæ­¥ajaxè¿›è¡Œè¯·æ±‚ï¼Œåœ¨successæ–¹æ³•ä¸­è¿›è¡Œæ‹¼æ¥ã€‚ 1234567891011121314151617181920212223function showPrintJobList()&#123; var loadingTip = $(&#x27;#loading&#x27;); loadingTip.show(); for(var i = 0;i &lt; rwid.length;i++)&#123; $.ajax(&#123; url: xxxxx, async: false, //é»˜è®¤å¼‚æ­¥ï¼Œä¸ºä¿è¯æ•°æ®å®Œæ•´å’Œé¡ºåºä½¿ç”¨åŒæ­¥è¯·æ±‚ type: &#x27;POST&#x27;, data:&#123; xxx: xxx &#125;, dataType: &#x27;json&#x27;, success: function(result) &#123; //.....å¾ªç¯æ‹¼æ¥ç»“æœï¼Œå¼¹çª—æ˜¾ç¤ºåˆ—è¡¨:$(&#x27;#rwlist&#x27;).show(); &#125;, error: function(err)&#123; console.log(err); &#125; &#125;); &#125; loadingTip.hide(); $(&#x27;#rwlist&#x27;).show();&#125; é—®é¢˜ä¿¡æ¯ç‚¹å‡»æŒ‰é’®åï¼Œé®ç½©å±‚æ²¡æœ‰å¼¹å‡ºï¼Œè€Œæ˜¯ç­‰å¾…è¡¨å•æ¸²æŸ“å®Œæˆåï¼Œçœ‹åˆ°ä¸€é—ªè€Œè¿‡çš„é®ç½©å±‚ã€‚ é—®é¢˜åŸå› async: falseajaxåŒæ­¥è¯·æ±‚åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„UIã€Domå…ƒç´ æ¸²æŸ“ä¼šè¢«é˜»å¡ã€‚æ‰€ä»¥å½“ç‚¹å‡»äº‹ä»¶è§¦å‘showPrintJobListå‡½æ•°æ—¶ï¼Œloading.show()æ˜¯æœ‰è¢«åŠ è½½åˆ°æµè§ˆå™¨çš„jsè¿è¡Œçº¿ç¨‹ä¸­ï¼Œä½†æ˜¯è¿è¡Œåˆ°ajaxåŒæ­¥è¯·æ±‚æ—¶ï¼Œä¼šå°†loading.show()é˜»å¡æ‰§è¡Œï¼Œç­‰åˆ°åŒæ­¥ajaxè¯·æ±‚å®Œäº†ï¼Œæ‰ä¼šè¿è¡Œã€‚ç„¶ååŒæ­¥ajaxå·²ç»è¯·æ±‚å®Œäº†ï¼Œç„¶åç›´æ¥è¢«éšè—ï¼Œç„¶åæ˜¾ç¤ºåˆ—è¡¨ã€‚æ‰€ä»¥ä¼šçœ‹åˆ°ä¸€é—ªè€Œè¿‡çš„loadingé®ç½©å±‚ è§£å†³æ–¹æ³•ä¸€ã€ä½¿ç”¨async waitå…³é”®å­—äºŒã€ä½¿ç”¨JQueryçš„Deferredå¯¹è±¡å’Œ$.when().done().fail() async&#x2F;awaitå…³é”®å­— 1.æ ‡è¯†æ‰€ä¿®é¥°çš„å‡½æ•°å­˜åœ¨å¼‚æ­¥ä»£ç ï¼Œå‡½æ•°å†…éƒ¨å¯ç”¨awaitå…³é”®å­—ä¿®é¥°å¼‚æ­¥è¿‡ç¨‹å˜ä¸ºåŒæ­¥ã€‚å‡½æ•°å†…éƒ¨ä¹Ÿå¯ä»¥å…¨éƒ¨ä¸ºåŒæ­¥ä»£ç ã€‚2.éé˜»å¡ï¼šasyncæ‰€æ ‡è¯†çš„å‡½æ•°å†…å­˜åœ¨å¼‚æ­¥ä»£ç ï¼Œä¼šç­‰å¾…å¼‚æ­¥ä»£ç æ‰§è¡Œå®Œï¼Œä½†æ˜¯asyncå‡½æ•°æœ¬èº«ä¼šé©¬ä¸Šè¿”å›ï¼Œä¸ä¼šé˜»å¡å½“å‰jså·¥ä½œä¸»çº¿ç¨‹ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºï¼Œasyncå‡½æ•°å·¥ä½œåœ¨ä¸»çº¿ç¨‹ï¼ŒåŒæ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ç•Œé¢æ¸²æŸ“ï¼Œasyncå‡½æ•°å†…éƒ¨ç”±awaitå…³é”®å­—ä¿®é¥°çš„å¼‚æ­¥è¿‡ç¨‹ï¼Œå·¥ä½œåœ¨ç›¸åº”çš„åç¨‹ä¸Šï¼Œä¼šé˜»å¡ç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„å®Œæˆå†è¿”å›ï¼› ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223async function showPrintJobList()&#123; var loadingTip = $(&#x27;#loading&#x27;); loadingTip.show(); for(var i = 0;i &lt; rwid.length;i++)&#123; await $.ajax(&#123; //ä½¿ç”¨awaitå…³é”®å­—ä¿®é¥°å¼‚æ­¥è¯·æ±‚ï¼Œä¿è¯æ•°æ®é¡ºåºå®Œæ•´ url: xxxxx, async: true, //æœ‰awaitå…³é”®å­—ï¼Œajaxè¯·æ±‚ä¿®æ”¹ä¸ºå¼‚æ­¥ type: &#x27;POST&#x27;, data:&#123; xxx: xxx &#125;, dataType: &#x27;json&#x27;, success: function(result) &#123; //.....å¾ªç¯æ‹¼æ¥ç»“æœï¼Œå¼¹çª—æ˜¾ç¤ºåˆ—è¡¨:$(&#x27;#rwlist&#x27;).show(); &#125;, error: function(err)&#123; console.log(err); &#125; &#125;); &#125; loadingTip.hide(); $(&#x27;#rwlist&#x27;).show();&#125; æˆ–è€…ä½¿ç”¨JQueryçš„Deferredå¯¹è±¡å’Œ$.when().done().fail()ä½¿å¼‚æ­¥è¯·æ±‚åŒæ­¥æ‰§è¡Œï¼ŒåŒæ—¶ä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536var dataList = [];function showPrintJobList()&#123; var defer = $.Deferred(); for(var i = 0;i &lt; rwid.length;i++)&#123; $.ajax(&#123; url: xxxxx, async: true, //ä½¿ç”¨Deferredå¯¹è±¡ï¼Œajaxè¯·æ±‚ä¿®æ”¹ä¸ºå¼‚æ­¥ type: &#x27;POST&#x27;, data:&#123; xxx: xxx &#125;, dataType: &#x27;json&#x27;, success: function(result) &#123; //dataListä¿å­˜ç»“æœ dataList.push(result); defer.resolve(dataList); &#125;, error: function(err)&#123; defer.reject(err); &#125; &#125;); &#125; return defer;&#125;$(&#x27;button#showList&#x27;).click(function()&#123; var loadingTip = $(&#x27;#loading&#x27;); loadingTip.show(); $.when(showPrintJobList()).done(function(data)&#123; //å¾ªç¯æ‹¼æ¥dataä¸­çš„listä¸­çš„æ•°æ® loadingTip.hide(); $(&#x27;#rwlist&#x27;).show(); &#125;).fail(function()&#123; console.log(err); &#125;);&#125; åŸç†è§£ææµè§ˆå™¨ä¸­ä¸€èˆ¬ä¼šè¿è¡ŒUIçº¿ç¨‹ã€JSçº¿ç¨‹ä»¥åŠäº‹ä»¶è§¦å‘çº¿ç¨‹ã€‚åœ¨ä¸Šè¿°ä¸Šè¿°ä»£ç ä¸­ï¼Œloading.show()æ–¹æ³•æ¶‰åŠåˆ°domæ ‘çš„æ›´æ–°ï¼Œæ‰€ä»¥è¢«åŠ è½½åˆ°äº†UIçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ä¸­ã€‚ä½†æ˜¯åé¢çš„ajaxåŒæ­¥è¯·æ±‚ï¼Œå› ä¸ºä¸æ˜¯å¼‚æ­¥çš„æ‰€ä»¥æµè§ˆå™¨ä¸ä¼šé‡æ–°æ–°å¢ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥æ”¾åœ¨jsçº¿ç¨‹ä¸­é˜»å¡å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚æ‰€ä»¥UIçº¿ç¨‹ä¸èƒ½æ‰§è¡Œloading.show()æ–¹æ³•ã€‚","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://renjunda.ren/tags/js/"}]},{"title":"linuxå¸¸ç”¨å‘½ä»¤","slug":"linuxå¸¸ç”¨å‘½ä»¤/linuxå¸¸ç”¨å‘½ä»¤","date":"2022-07-15T08:00:00.000Z","updated":"2022-07-28T02:44:44.020Z","comments":true,"path":"lxb/fe4ef317.html","link":"","permalink":"https://renjunda.ren/lxb/fe4ef317.html","excerpt":"","text":"Linuxéšç€ITäº§ä¸šçš„ä¸æ–­å‘å±•ï¼ŒLinuxæ“ä½œç³»ç»Ÿåº”ç”¨é¢†åŸŸè¶Šæ¥è¶Šå¹¿æ³›ï¼Œå°¤å…¶æ˜¯è¿‘å¹´æ¥Linuxåœ¨æœåŠ¡å™¨é¢†åŸŸé£é€Ÿçš„å‘å±•ï¼Œä¸»è¦å¾—ç›ŠäºLinuxæ“ä½œç³»ç»Ÿå…·å¤‡çš„å¦‚ä¸‹ä¼˜ç‚¹ å¼€æºå…è´¹ã€ç³»ç»Ÿè¿­ä»£æ›´æ–° ç³»ç»Ÿæ€§èƒ½ç¨³å®šã€å®‰å…¨æ€§é«˜ å¤šä»»åŠ¡ã€å¤šç”¨æˆ· è€—èµ„æºå°ã€æ— éœ€å›¾å½¢åŒ–ç•Œé¢ã€å†…æ ¸å° åº”ç”¨é¢†åŸŸå¹¿æ³›ã€ä½¿ç”¨åŠå…¥é—¨å®¹æ˜“ Linuxå‘½ä»¤cd12345ç›®å½•åˆ‡æ¢cd .. # ä¸Šä¸€å±‚ç›®å½•cd # å®¶ç›®å½•cd ~ # å®¶ç›®å½•cd / # æ ¹ç›®å½• ls12345æµè§ˆç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ ls -a # åˆ—ä¸¾æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•ï¼ŒåŒ…å«.å¼€å¤´çš„éšè—æ–‡ä»¶ ls -l # è¯¦ç»†ä¿¡æ¯åˆ—ä¸¾æ–‡ä»¶æˆ–ç›®å½• ls -i # åˆ—å‡ºæ¯ä¸ªæ–‡ä»¶çš„Inodeå· ls -t # æ ¹æ®ä¿®æ”¹æ—¶é—´åˆ—å‡ºæ–‡ä»¶ pwd1æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½• mkdir123åˆ›å»ºç›®å½•mkdir a # åˆ›å»ºaç›®å½•mkdir -p a/b/c # é€’å½’åˆ›å»ºç›®å½• rm1234åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•rm a # åˆ é™¤aæ–‡ä»¶rm -r a # åˆ é™¤aç›®å½•rm -rf a # å¼ºåˆ¶åˆ é™¤aæ–‡ä»¶ï¼Œä¸æç¤ºç¡®è®¤ cpcp å‚æ•°è¯´æ˜ -aï¼šæ­¤é€‰é¡¹é€šå¸¸åœ¨å¤åˆ¶ç›®å½•æ—¶ä½¿ç”¨ï¼Œå®ƒä¿ç•™é“¾æ¥ã€æ–‡ä»¶å±æ€§ï¼Œå¹¶å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚å…¶ä½œç”¨ç­‰äºdpRå‚æ•°ç»„åˆã€‚ -dï¼šå¤åˆ¶æ—¶ä¿ç•™é“¾æ¥ã€‚è¿™é‡Œæ‰€è¯´çš„é“¾æ¥ç›¸å½“äº Windows ç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ã€‚ -fï¼šè¦†ç›–å·²ç»å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶è€Œä¸ç»™å‡ºæç¤ºã€‚ -iï¼šä¸ -f é€‰é¡¹ç›¸åï¼Œåœ¨è¦†ç›–ç›®æ ‡æ–‡ä»¶ä¹‹å‰ç»™å‡ºæç¤ºï¼Œè¦æ±‚ç”¨æˆ·ç¡®è®¤æ˜¯å¦è¦†ç›–ï¼Œå›ç­” y æ—¶ç›®æ ‡æ–‡ä»¶å°†è¢«è¦†ç›–ã€‚ -pï¼šé™¤å¤åˆ¶æ–‡ä»¶çš„å†…å®¹å¤–ï¼Œè¿˜æŠŠä¿®æ”¹æ—¶é—´å’Œè®¿é—®æƒé™ä¹Ÿå¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­ã€‚ -rï¼šè‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œæ­¤æ—¶å°†å¤åˆ¶è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶ã€‚ -lï¼šä¸å¤åˆ¶æ–‡ä»¶ï¼Œåªæ˜¯ç”Ÿæˆé“¾æ¥æ–‡ä»¶ã€‚123æ‹·è´æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹cp /root/1.py /home/1.py # æ‹·è´æ–‡ä»¶è‡³æ–°ç›®å½•ä¸‹cp -r è¡¨ç¤ºé€’å½’åˆ›å»º cp -r å®ä¾‹ä½¿ç”¨æŒ‡ä»¤ cp å°†å½“å‰ç›®å½• test&#x2F; ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°æ–°ç›®å½• newtest ä¸‹ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š cp â€“r test&#x2F; newtest touch12åˆ›å»ºæ™®é€šæ–‡ä»¶touch 1.py # åˆ›å»º1.pyæ–‡ä»¶ cat1234æŸ¥çœ‹æ–‡ä»¶å†…å®¹cat /etc/redis/redis.conf # æŸ¥çœ‹redis.confæ–‡ä»¶cat -n # å¯¹è¾“å‡ºæ‰€æœ‰è¡Œè¿›è¡Œç¼–å·cat -b # å¯¹è¾“å‡ºéç©ºè¡Œè¿›è¡Œç¼–å· cat1234æŸ¥çœ‹æ–‡ä»¶å†…å®¹cat /etc/redis/redis.conf # æŸ¥çœ‹redis.confæ–‡ä»¶cat -n # å¯¹è¾“å‡ºæ‰€æœ‰è¡Œè¿›è¡Œç¼–å·cat -b # å¯¹è¾“å‡ºéç©ºè¡Œè¿›è¡Œç¼–å· less123å¦‚æœæ–‡ä»¶è¾ƒå¤§çš„è¯ï¼Œä¾‹å¦‚æ—¥å¿—æ–‡ä»¶,æˆ‘ä»¬æƒ³æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ç”¨catå‘½ä»¤è‚¯å®šæ˜¯ä¸è¡Œçš„,less å‘½ä»¤å¯ä»¥ç²¾ç¡®åˆ°ä½ æƒ³è¦æŸ¥çœ‹çš„è¡Œå·less -N + è¡Œå· g run.logæ³¨æ„ï¼š -Næ˜¯ä¸ºäº†æ˜¾ç¤ºè¡Œå· head1234æŸ¥çœ‹æ–‡ä»¶å¤´éƒ¨å†…å®¹ï¼Œé€šå¸¸ä¸ºåè¡Œhead -3 /etc/memcached.conf # æŸ¥çœ‹å‰ä¸‰è¡Œhead -n 100 # æŸ¥çœ‹å‰100è¡Œhead -c 3 # æŸ¥çœ‹å‰ä¸‰å­—èŠ‚ tail1234æŸ¥çœ‹æ–‡ä»¶æœ«å°¾å†…å®¹ï¼Œé€šå¸¸ä¸ºåè¡Œtail -n 3 1.txt # æŸ¥çœ‹å3è¡Œtail -f # é˜»å¡å¹¶å³ä½¿è¾“å‡ºæ–‡ä»¶å˜åŒ–åè¿½åŠ çš„æ•°æ®ç”¨tail -f ç›‘æ§æ—¥å¿—æ—¥æ–‡ä»¶å¾ˆæ–¹ä¾¿,ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æå‡å¼€å‘æ•ˆç‡ df123ç£ç›˜ä¿¡æ¯æŸ¥è¯¢df -h # æŸ¥è¯¢ç£ç›˜ä½¿ç”¨é‡df -i # åˆ†åŒºInodeä½¿ç”¨é‡ du12æŸ¥çœ‹æ–‡ä»¶å¤§å°du -h 1.txt # æŸ¥çœ‹1.txtæ–‡ä»¶å¤§å° echo1234æ‰“å°æˆ–è¾“å‡ºå†…å®¹echo &#x27;hello&#x27; # è¾“å‡ºhelloecho &#x27;hello&#x27; &gt; 1.md # ä»¥helloå†…å®¹è¦†ç›–1.mdecho &#x27;hello&#x27; &gt;&gt; 1.md # ä»¥helloè¿½åŠ è‡³1.mdæ–‡ä»¶ä¸­ tar12345è§£å‹æˆ–å‹ç¼©æ–‡ä»¶tar -jxvf # è§£å‹bz2å±æ€§çš„å‹ç¼©åŒ…tar -zxvf # è§£å‹gzå±æ€§çš„å‹ç¼©åŒ…tar -czvf # ä½¿ç”¨gzipæ ¼å¼å‹ç¼©æ–‡ä»¶tar -cjvf # ä½¿ç”¨bzip2æ ¼å¼å‹ç¼©æ–‡ä»¶ top1234567891011æŸ¥çœ‹cpuä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡Processes: 602 total, 3 running, 599 sleeping, 3328 threads 10:28:56Load Avg: 2.28, 2.59, 2.93 CPU usage: 2.9% user, 2.3% sys, 95.87% idleSharedLibs: 433M resident, 88M data, 120M linkedit.MemRegions: 183414 total, 5692M resident, 133M private, 1890M shared.PhysMem: 16G used (3203M wired), 57M unused.VM: 20T vsize, 3083M framework vsize, 210327729(698) swapins, 212927606(0) swapouts.Networks: packets: 12467515/57G in, 10837863/53G out.Disks: 13084346/899G read, 9903101/930G written.PID COMMAND %CPU TIME #TH #WQ #PORT MEM PURG CMPRS PGRP PPID STATE free12345free -hæŸ¥çœ‹å†…å­˜ï¼Œå¹¶ä»¥äººæ€§åŒ–æ–¹å¼å±•ç¤º[iomt@pa_cicd ~]$ free -h total used free shared buff/cache availableMem: 15G 1.1G 12G 313M 2.4G 13GSwap: 2.0G 0B 2.0G iostat1æŸ¥çœ‹ç£ç›˜ioè¯»å–é€Ÿåº¦ ps12æŸ¥çœ‹è¿›ç¨‹ps -ef | grep process name su12åˆ‡æ¢è´¦å·su root # åˆ‡æ¢ä¸ºrootç”¨æˆ· passwd1ä¿®æ”¹å¯†ç  rename1234567891011æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åç§° &gt;[root@localhost kervin24]# ls a c fc.log ff.log fi.log fl.log fo.log fr.log fu.log fx.log aaa d fd.log fg.log fj.log fm.log fp.log fs.log fv.log fy.log b fb.log fe.log fh.log fk.log fn.log fq.log ft.log fw.log fz.log [root@localhost kervin24]# rename log txt * æŠŠæ‰€æœ‰logæ–‡ä»¶æ”¹ä¸ºtxtæ–‡ä»¶ ------------------------------------------------------------------------------ [root@localhost kervin24]# ls a c fc.txt ff.txt fi.txt fl.txt fo.txt fr.txt fu.txt fx.txt aaa d fd.txt fg.txt fj.txt fm.txt fp.txt fs.txt fv.txt fy.txt b fb.txt fe.txt fh.txt fk.txt fn.txt fq.txt ft.txt fw.txt fz.txt","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://renjunda.ren/tags/Linux/"}]},{"title":"pythonè¯¦è§£paramiko","slug":"pythonè¯¦è§£paramiko/pythonè¯¦è§£paramiko","date":"2022-07-01T12:00:00.000Z","updated":"2022-07-28T02:44:26.154Z","comments":true,"path":"lxb/b2d1c38.html","link":"","permalink":"https://renjunda.ren/lxb/b2d1c38.html","excerpt":"","text":"paramikoæ˜¯ç”¨pythonè¯­è¨€å†™çš„ä¸€ä¸ªæ¨¡å—ï¼Œéµå¾ªSSH2åè®®ï¼Œæ”¯æŒä»¥åŠ å¯†å’Œè®¤è¯çš„æ–¹å¼ï¼Œè¿›è¡Œè¿œç¨‹æœåŠ¡å™¨çš„è¿æ¥ã€‚paramikoæ”¯æŒLinux, Solaris, BSD, MacOS X, Windowsç­‰å¹³å°é€šè¿‡SSHä»ä¸€ä¸ªå¹³å°è¿æ¥åˆ°å¦å¤–ä¸€ä¸ªå¹³å°ã€‚åˆ©ç”¨è¯¥æ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œsshè¿æ¥å’Œsftpåè®®è¿›è¡Œsftpæ–‡ä»¶ä¼ è¾“ã€‚ ä¸€ã€SSHClientç±»SSHClientçš„ä½œç”¨ç±»ä¼¼äºLinuxçš„sshå‘½ä»¤ï¼Œæ˜¯å¯¹SSHä¼šè¯çš„å°è£…ï¼Œè¯¥ç±»å°è£…äº†ä¼ è¾“(Transport)ï¼Œé€šé“(Channel)åŠSFTPClientå»ºç«‹çš„æ–¹æ³•(open_sftp)ï¼Œé€šå¸¸ç”¨äºæ‰§è¡Œè¿œç¨‹å‘½ä»¤ã€‚ sshè¿œç¨‹è¿æ¥æœåŠ¡å™¨ connet()1connect(ip, port=22, username=None, password=None, pkey=None, key_filename=None, timeout=None, allow_agent=True, look_for_keys=True, compress=False, sock=None, gss_auth=False, gss_kex=False, gss_deleg_creds=True, gss_host=None, banner_timeout=None, auth_timeout=None, gss_trust_dns=True, passphrase=None) å‚æ•°è¯´æ˜ï¼š ip(strç±»å‹)ï¼Œè¿æ¥çš„ç›®æ ‡ä¸»æœºåœ°å€ï¼› port(intç±»å‹)ï¼Œè¿æ¥ç›®æ ‡ä¸»æœºçš„ç«¯å£ï¼Œé»˜è®¤ä¸º22ï¼› username(strç±»å‹)ï¼Œæ ¡éªŒçš„ç”¨æˆ·å(é»˜è®¤ä¸ºå½“å‰çš„æœ¬åœ°ç”¨æˆ·å)ï¼› password(strç±»å‹)ï¼Œå¯†ç ç”¨äºèº«ä»½æ ¡éªŒæˆ–è§£é”ç§é’¥ï¼› pkey(Pkeyç±»å‹)ï¼Œç§é’¥æ–¹å¼ç”¨äºèº«ä»½éªŒè¯ï¼› key_filename(str or list(str)ç±»å‹)ï¼Œä¸€ä¸ªæ–‡ä»¶åæˆ–æ–‡ä»¶ååˆ—è¡¨ï¼Œç”¨äºç§é’¥çš„èº«ä»½éªŒè¯ï¼› timeout(floatç±»å‹)ï¼Œä¸€ä¸ªå¯é€‰çš„è¶…æ—¶æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)çš„TCPè¿æ¥ï¼› allow_agent(boolç±»å‹)ï¼Œè®¾ç½®ä¸ºFalseæ—¶ç”¨äºç¦ç”¨è¿æ¥åˆ°SSHä»£ç†ï¼› look_for_keys(boolç±»å‹)ï¼Œè®¾ç½®ä¸ºFalseæ—¶ç”¨äºæ¥ç¦ç”¨åœ¨ï½&#x2F;.sshä¸­æœç´¢ç§é’¥æ–‡ä»¶ï¼› compress(boolç±»å‹)ï¼Œè®¾ç½®ä¸ºTrueæ—¶æ‰“å¼€å‹ç¼©ã€‚ 1234import paramikossh = paramiko.SSHClient()ssh.connect(ip,22,username,passwd,timeout=5)æ­¤å¤„ipã€usernameã€passwdéƒ½ä½œä¸ºå˜é‡ æ‰§è¡Œå‘½ä»¤123456789101112131415import paramikoclient = paramiko.SSHClient()client.load_system_host_keys()# ç›®çš„æ˜¯æ¥å—ä¸åœ¨æœ¬åœ°Known_hostæ–‡ä»¶ä¸‹çš„ä¸»æœºclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())# connect å‡½æ•°å¯ä»¥æ¥å—å¾ˆå¤šå‚æ•°client.connect(ip, port, txt_username, txt_password, timeout=5, allow_agent=False, look_for_keys=False)remote_conn = client.invoke_shell()time.sleep(3)# å®ç°å½“å‰ç›®å½•ä¸‹çš„ä¸œè¥¿remote_conn.send(&#x27;ls\\n&#x27;)# è·å–å‘½ä»¤çš„æ‰§è¡Œç»“æœoutput = remote_conn.recv(2065535)# å…³é—­è¿æ¥client.close()","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://renjunda.ren/tags/Python/"}]},{"title":"Mysqlå–æ¶ˆå¤–é”®çº¦æŸ","slug":"Mysqlå–æ¶ˆå¤–é”®çº¦æŸ","date":"2022-04-25T15:16:12.000Z","updated":"2022-04-28T10:16:36.488Z","comments":true,"path":"lxb/a03a2ff4.html","link":"","permalink":"https://renjunda.ren/lxb/a03a2ff4.html","excerpt":"","text":"SET FOREIGN_KEY_CHECKS&#x3D;0;åœ¨Mysqlä¸­å–æ¶ˆå¤–é”®çº¦æŸMysqlä¸­å¦‚æœè¡¨å’Œè¡¨ä¹‹é—´å»ºç«‹çš„å¤–é”®çº¦æŸï¼Œåˆ™æ— æ³•åˆ é™¤è¡¨åŠä¿®æ”¹è¡¨ç»“æ„ è§£å†³æ–¹æ³•æ˜¯åœ¨Mysqlä¸­å–æ¶ˆå¤–é”®çº¦æŸ: SET FOREIGN_KEY_CHECKS&#x3D;0; ç„¶åå°†åŸæ¥è¡¨çš„æ•°æ®å¯¼å‡ºåˆ°sqlè¯­å¥ï¼Œé‡æ–°åˆ›å»ºæ­¤è¡¨åï¼Œå†æŠŠæ•°æ®ä½¿ç”¨sqlå¯¼å…¥ ç„¶åå†è®¾ç½®å¤–é”®çº¦æŸ: SET FOREIGN_KEY_CHECKS&#x3D;1;","categories":[],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://renjunda.ren/tags/Mysql/"}]},{"title":"ä½¿ç”¨chmodä¿®æ”¹æƒé™","slug":"ä½¿ç”¨chmodä¿®æ”¹æƒé™","date":"2022-04-21T08:16:12.000Z","updated":"2022-04-28T10:12:32.284Z","comments":true,"path":"lxb/26c8ee4c.html","link":"","permalink":"https://renjunda.ren/lxb/26c8ee4c.html","excerpt":"","text":"chmodç®€ä»‹12Chmodå‘½ä»¤ä¸»è¦ç”¨äºä¿®æ”¹ã€è®¾ç½®æ–‡ä»¶æƒé™chmod ä¿®æ”¹æ–‡ä»¶æƒé™ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š å­—æ¯æ³•ä¸æ•°å­—æ³• chmodèƒ½æ”¹å˜æƒé™ï¼Œ-Ræ˜¯ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œ777å°±æ˜¯é«˜æƒé™ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰chmod -R 777 * æ„æ€å°±æ˜¯å°†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½ç»™äºˆ777æƒé™ 1234567-rw------- ï¼ˆ600) â€“ åªæœ‰å±ä¸»æœ‰è¯»å†™æƒé™ã€‚-rw-râ€“r-- (644) â€“ åªæœ‰å±ä¸»æœ‰è¯»å†™æƒé™ï¼›è€Œå±ç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·åªæœ‰è¯»æƒé™ã€‚-rwx------ (700) â€“ åªæœ‰å±ä¸»æœ‰è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚-rwxr-xr-x (755) â€“ å±ä¸»æœ‰è¯»ã€å†™ã€æ‰§è¡Œæƒé™ï¼›è€Œå±ç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·åªæœ‰è¯»ã€æ‰§è¡Œæƒé™ã€‚-rwxâ€“xâ€“x (711) â€“ å±ä¸»æœ‰è¯»ã€å†™ã€æ‰§è¡Œæƒé™ï¼›è€Œå±ç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·åªæœ‰æ‰§è¡Œæƒé™ã€‚-rw-rw-rw- (666) â€“ æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æ–‡ä»¶è¯»ã€å†™æƒé™ã€‚è¿™ç§åšæ³•ä¸å¯å–ã€‚-rwxrwxrwx (777) â€“ æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚æ›´ä¸å¯å–çš„åšæ³•ã€‚ u è¡¨ç¤ºè¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼Œg è¡¨ç¤ºä¸è¯¥æ–‡ä»¶çš„æ‹¥æœ‰è€…å±äºåŒä¸€ä¸ªç¾¤ä½“(group)è€…ï¼Œo è¡¨ç¤ºå…¶ä»–ä»¥å¤–çš„äººï¼Œa è¡¨ç¤ºè¿™ä¸‰è€…çš†æ˜¯ã€‚uç”¨æˆ· gç»„ oå…¶å®ƒ a æ‰€æœ‰ç”¨æˆ·(é»˜è®¤) è¡¨ç¤ºå¢åŠ æƒé™ã€- è¡¨ç¤ºå–æ¶ˆæƒé™ã€&#x3D; è¡¨ç¤ºå”¯ä¸€è®¾å®šæƒé™ã€‚r è¡¨ç¤ºå¯è¯»å–ï¼Œw è¡¨ç¤ºå¯å†™å…¥ï¼Œx è¡¨ç¤ºå¯æ‰§è¡Œï¼ŒX è¡¨ç¤ºåªæœ‰å½“è¯¥æ–‡ä»¶æ˜¯ä¸ªå­ç›®å½•æˆ–è€…è¯¥æ–‡ä»¶å·²ç»è¢«è®¾å®šè¿‡ä¸ºå¯æ‰§è¡Œã€‚ è¿™ä¸ªåœ¨æœåŠ¡å™¨é‡Œä¸èƒ½éšä¾¿æ•²çš„ï¼Œä¸èƒ½åœ¨æ ¹ç›®å½•ä¸‹è¿›è¡Œæ­¤å‘½ä»¤ï¼Œå› ä¸ºæœ‰äº›è¿›ç¨‹æ˜¯æŒ‡å®šæƒé™ï¼ˆå¦‚755ã€700â€¦ï¼‰æ‰èƒ½è¿è¡Œçš„â€¦æ‰€ä»¥ä¼šå‡ºé”™.æ‰€ä»¥åªéœ€è¦æŒ‡å®šè‡ªå·±æ‰€éœ€çš„ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œèµ‹äºˆæƒé™å³å¯","categories":[],"tags":[]},{"title":"è¯¦è§£Pythonä¸­çš„evalå‡½æ•°","slug":"è¯¦è§£Pythonä¸­çš„evalå‡½æ•°","date":"2022-04-07T08:16:12.000Z","updated":"2022-04-08T03:39:53.752Z","comments":true,"path":"lxb/29f18618.html","link":"","permalink":"https://renjunda.ren/lxb/29f18618.html","excerpt":"","text":"åœ¨ Python å­¦ä¹ ä¸­å¦‚æœèƒ½å¤Ÿåˆ©ç”¨å¥½ Python è‡ªå¸¦çš„å‡½æ•°ï¼Œé‚£ä¹ˆå¼€å‘çš„é€Ÿåº¦å°†ä¼šå‡ºç°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚ ä¸€ç›´ä»¥æ¥å…³äº eval å‡½æ•°çš„ç”¨æ³•ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæ¯•ç«Ÿè¿™ä¸ªå‡½æ•°åœ¨å¼€å‘ä¸­å‡ºç°çš„é¢‘ç‡ä¸ç®—é«˜ã€‚ä½†æ˜¯è¯¦ç»†äº†è§£ eval å‡½æ•°çš„ç”¨æ³•ï¼Œä¹Ÿæ˜¯å¾ˆé‡è¦çš„ å®æˆ˜æ•™ç¨‹ ç»¼ä¸Šæ‰€è¿°:evalå‡½æ•°çš„ç”¨æ³•å°±æ˜¯æŠŠå­—ç¬¦ä¸²å¯¹è±¡è½¬æ¢ä¸ºèƒ½å¤Ÿå…·ä½“çš„å¯¹è±¡.","categories":[],"tags":[{"name":"python","slug":"python","permalink":"https://renjunda.ren/tags/python/"}]},{"title":"Djanoå®ç°ä¸‹è½½æ–‡ä»¶åŠŸèƒ½ (ä½ æ²¡äº‹å§?ğŸ˜)","slug":"Djanoå®ç°ä¸‹è½½æ–‡ä»¶åŠŸèƒ½/Djanoå®ç°ä¸‹è½½æ–‡ä»¶åŠŸèƒ½","date":"2022-04-01T09:00:21.000Z","updated":"2022-04-02T01:12:18.838Z","comments":true,"path":"lxb/6c2328a8.html","link":"","permalink":"https://renjunda.ren/lxb/6c2328a8.html","excerpt":"","text":"ä¸€ã€ç®€å•ä»‹ç»æ–‡ä»¶ä¸‹è½½æœ€ç®€å•çš„æ–‡ä»¶ä¸‹è½½åŠŸèƒ½çš„å®ç° 1ã€å°†æ–‡ä»¶æµæ”¾å…¥HttpResponseå¯¹è±¡å³å¯ï¼Œå¦‚ 12345def file_download(request): # do something... with open(&#x27;file_name.txt&#x27;) as f: c = f.read() return HttpResponse(c) è¿™ç§æ–¹å¼ç®€å•ç²—æš´ï¼Œé€‚åˆå°æ–‡ä»¶çš„ä¸‹è½½ï¼Œä½†å¦‚æœè¿™ä¸ªæ–‡ä»¶éå¸¸å¤§ï¼Œè¿™ç§æ–¹å¼ä¼šå ç”¨å¤§é‡çš„å†…å­˜ï¼Œç”šè‡³å¯¼è‡´æœåŠ¡å™¨å´©æºƒ æ›´åˆç†çš„æ–‡ä»¶ä¸‹è½½åŠŸèƒ½Djangoçš„HttpResponseå¯¹è±¡å…è®¸å°†è¿­ä»£å™¨ä½œä¸ºä¼ å…¥å‚æ•°ï¼Œå°†ä¸Šé¢ä»£ç ä¸­çš„ä¼ å…¥å‚æ•°cæ¢æˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¾¿å¯ä»¥å°†ä¸Šè¿°ä¸‹è½½åŠŸèƒ½ä¼˜åŒ–ä¸ºå¯¹å¤§å°æ–‡ä»¶å‡é€‚åˆï¼›è€ŒDjangoæ›´è¿›ä¸€æ­¥ï¼Œæ¨èä½¿StreamingHttpResponseå¯¹è±¡å–ä»£HttpResponseå¯¹è±¡ï¼ŒStreamingHttpResponseå¯¹è±¡ç”¨äºå°†æ–‡ä»¶æµå‘é€ç»™æµè§ˆå™¨ï¼Œä¸HttpResponseå¯¹è±¡éå¸¸ç›¸ä¼¼ï¼Œå¯¹äºæ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼Œä½¿ç”¨StreamingHttpResponseå¯¹è±¡æ›´åˆç†ã€‚ å› æ­¤ï¼Œæ›´åŠ åˆç†çš„æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼Œåº”è¯¥å…ˆå†™ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ï¼Œç„¶åå°†è¿™ä¸ªè¿­ä»£å™¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™StreaminghttpResponseå¯¹è±¡ HttpResponseä¼šç›´æ¥ä½¿ç”¨è¿­ä»£å™¨å¯¹è±¡ï¼Œå°†è¿­ä»£å™¨å¯¹è±¡çš„å†…å®¹å­˜å‚¨åŸå­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯ï¼ŒåŒæ—¶é‡Šæ”¾å†…å­˜ã€‚å¯ä»¥å½“æ–‡ä»¶å˜å¤§çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªéå¸¸è€—è´¹æ—¶é—´å’Œå†…å­˜çš„è¿‡ç¨‹ã€‚StreamingHttpResponseè¿™æ˜¯ä¸€ç§éå¸¸çœæ—¶çœå†…å­˜çš„æ–¹æ³•ã€‚ä½†æ˜¯å› ä¸ºStreamingHttpResponseçš„æ–‡ä»¶ä¼ è¾“è¿‡ç¨‹æŒç»­åœ¨æ•´ä¸ªresponseçš„è¿‡ç¨‹ä¸­ï¼Œæ‰€ä»¥è¿™æœ‰å¯èƒ½ä¼šé™ä½æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ ä»£ç å— 123456789101112131415from django.http import StreamingHttpResponse def file_download(request): def file_iterator(file_name, chunk_size=512): with open(file_name) as f: while True: c = f.read(chunk_size) if c: yield c else: break the_file_name = &quot;file_name.txt&quot; response = StreamingHttpResponse(file_iterator(the_file_name)) return response ç»“åˆé¡¹ç›®ä½¿ç”¨å®Œæ•´ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚æ•´æ”¹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192# å¯¼å…¥ç›¸å…³ä¾èµ–æ–‡ä»¶import xlsxwriterfrom django.http import StreamingHttpResponse, JsonResponse, FileResponsefrom django.http import HttpResponsefrom django.urls import reverse_lazyfrom django.utils.encoding import escape_uri_pathdef export_data(request): filename = &#x27;&#123;&#125;.xlsx&#x27;.format(&#x27;äººå‘˜ä¿¡æ¯&#x27;) if request.method == &#x27;GET&#x27;: try: response = StreamingHttpResponse(file_iterator(filename)) # ä»¥æµçš„å½¢å¼ä¸‹è½½æ–‡ä»¶,è¿™æ ·å¯ä»¥å®ç°ä»»æ„æ ¼å¼çš„æ–‡ä»¶ä¸‹è½½ response[&#x27;Content-Type&#x27;] = &#x27;application/octet-stream&#x27; response[&quot;Content-Disposition&quot;] = &quot;attachment; filename*=UTF-8&#x27;&#x27;&#123;&#125;&quot;.format(escape_uri_path(filename)) except: return HttpResponse(&quot;ç”Ÿæˆæ–‡ä»¶å¤±è´¥&quot;) return response if request.method == &#x27;POST&#x27;: # è¡¨å¤´,ä¸ºäº†æ–¹ä¾¿ç›´æ¥å†ä»£ç ä¸­, å¹³æ—¶æˆ‘ä»¬ä¸ºäº†è§„èŒƒä»£ç ä¸€èˆ¬å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ ping_header = &#123; &#x27;å§“å&#x27;: &#x27;1&#x27;, &#x27;æ€§åˆ«&#x27;: &#x27;2&#x27;, &#x27;å¹´é¾„&#x27;: &#x27;3&#x27;, &#x27;å±…ä½åœ°å€&#x27;: &#x27;4&#x27;, &#125; # å…ˆæŠŠæ•°æ®å†™æ­»ï¼Œæ ¹æ®éœ€æ±‚è‡ªå·±å»æ•°æ®åº“æŸ¥è¯¢ data = [ &#123;&#x27;name&#x27;: &#x27;åˆ˜å¤‡&#x27;, &#x27;sex&#x27;: &#x27;ç”·&#x27;, &#x27;age&#x27;: 18, &#x27;addr&#x27;: &#x27;è†å·&#x27;&#125;, &#123;&#x27;name&#x27;: &#x27;å…³ç¾½&#x27;, &#x27;sex&#x27;: &#x27;å¥³&#x27;, &#x27;age&#x27;: 10, &#x27;addr&#x27;: &#x27;è†å·&#x27;&#125;, &#123;&#x27;name&#x27;: &#x27;å¼ é£&#x27;, &#x27;sex&#x27;: &#x27;ç”·&#x27;, &#x27;age&#x27;: 10, &#x27;addr&#x27;: &#x27;è†å·&#x27;&#125;, &#123;&#x27;name&#x27;: &#x27;é»„å®‡æ’&#x27;, &#x27;sex&#x27;: &#x27;å…¶ä»–&#x27;, &#x27;age&#x27;: 99, &#x27;addr&#x27;: &#x27;æ±Ÿè¥¿çœå—æ˜Œå¸‚è¿›è´¤å¿&#x27;&#125;, ] workbook = xlsxwriter.Workbook(filename) # å»ºç«‹æ–‡ä»¶ worksheet = workbook.add_worksheet(&quot;äººå‘˜ä¿¡æ¯ç»Ÿè®¡&quot;) head_style = workbook.add_format(xlsx_style(bold=True, bg_color=&#x27;#95B3D7&#x27;)) body_style = workbook.add_format(xlsx_style()) _header = ping_header for index, value in enumerate(_header): worksheet.write(0, index + 4, value, head_style) n_index = 1 if len(data) &gt; 0: for item in data: worksheet.write(n_index, 4, item[&#x27;name&#x27;] if item.get(&#x27;name&#x27;) else &#x27;&#x27;, body_style) worksheet.write(n_index, 5, item[&#x27;sex&#x27;] if item.get(&#x27;sex&#x27;) else &#x27;&#x27;, body_style) worksheet.write(n_index, 6, item[&#x27;age&#x27;] if item.get(&#x27;age&#x27;) else &#x27;&#x27;, body_style) worksheet.write(n_index, 7, item[&#x27;addr&#x27;] if item.get(&#x27;addr&#x27;) else &#x27;&#x27;, body_style) n_index += 1 # å°†ç”Ÿæˆçš„excelæ”¾å…¥byteæµç»™response workbook.close() url = reverse_lazy(&#x27;app_name:è·¯ç”±åç§°&#x27;) # å°†ä¸‹è½½è·¯ç”±è¿”å›å‰ç«¯,å‰ç«¯é€šè¿‡è¯·æ±‚è¿”å›çš„è·¯ç”±å®ç°æ–‡ä»¶ä¸‹è½½ return JsonResponse(&#123;&#x27;redirect&#x27;: url, &#x27;code&#x27;: 0&#125;)def file_iterator(file_path, chunk_size=512): &quot;&quot;&quot; æ–‡ä»¶ç”Ÿæˆå™¨,é˜²æ­¢æ–‡ä»¶è¿‡å¤§ï¼Œå¯¼è‡´å†…å­˜æº¢å‡º :param file_path: æ–‡ä»¶è·¯å¾„ :param chunk_size: å—å¤§å° :return: ç”Ÿæˆå™¨ &quot;&quot;&quot; with open(file_path, mode=&#x27;rb&#x27;) as f: while True: c = f.read(chunk_size) if c: yield c else: break# xlsxwriterçš„æ ·å¼å…¬æœ‰å‡½æ•°def xlsx_style(**kwargs): style = &#123; &#x27;bold&#x27;: kwargs.get(&#x27;bold&#x27;, False), # åŠ ç²— &#x27;font_name&#x27;: kwargs.get(&#x27;font_name&#x27;, &#x27;SimSun&#x27;), # å­—ä½“ç±»å‹ï¼Œé»˜è®¤å®‹ä½“ &#x27;font_size&#x27;: kwargs.get(&#x27;font_size&#x27;, 10), # å­—ä½“å¤§å°ï¼Œé»˜è®¤12 &#x27;font_color&#x27;: kwargs.get(&#x27;font_color&#x27;, &#x27;#000000&#x27;), # å­—ä½“é¢œè‰²ï¼Œé»‘è‰² &#x27;align&#x27;: kwargs.get(&#x27;align&#x27;, &#x27;center&#x27;), # é»˜è®¤æ°´å¹³å±…ä¸­ &#x27;valign&#x27;: kwargs.get(&#x27;valign&#x27;, &#x27;vcenter&#x27;), # é»˜è®¤å‚ç›´å±…ä¸­ &#x27;text_wrap&#x27;: kwargs.get(&#x27;text_wrap&#x27;, True), # é»˜è®¤è‡ªåŠ¨æ¢è¡Œ &#x27;top&#x27;: kwargs.get(&#x27;top&#x27;, 1), # ä¸Šè¾¹ç•Œï¼Œçº¿æ¡å®½åº¦ &#x27;bottom&#x27;: kwargs.get(&#x27;bottom&#x27;, 1), # è¾¹ç•Œ &#x27;left&#x27;: kwargs.get(&#x27;left&#x27;, 1), # è¾¹ç•Œ &#x27;right&#x27;: kwargs.get(&#x27;right&#x27;, 1), # è¾¹ç•Œ &#x27;bg_color&#x27;: kwargs.get(&#x27;bg_color&#x27;, &#x27;#FFFFFF&#x27;), # èƒŒæ™¯é¢œè‰²ï¼Œç™½è‰² # å…¶ä»–ç±»å‹è®¾ç½®æ ¼å¼å¯ä»¥æ¥ç€å†™ &#125; return style æ–‡ä»¶ä¸‹è½½å®Œæˆåæ ·å¼å±•ç¤º","categories":[],"tags":[{"name":"Django","slug":"Django","permalink":"https://renjunda.ren/tags/Django/"}]},{"title":"jså¦‚ä½•è·å–urlä¸­çš„å‚æ•°","slug":"jså¦‚ä½•è·å–urlä¸­çš„å‚æ•°/jså¦‚ä½•è·å–urlä¸­çš„å‚æ•°","date":"2022-04-01T08:24:09.000Z","updated":"2022-04-02T01:10:09.079Z","comments":true,"path":"lxb/5477648b.html","link":"","permalink":"https://renjunda.ren/lxb/5477648b.html","excerpt":"","text":"jså¦‚ä½•é€šè¿‡ä»£ç è·å–urlä¸­çš„å‚æ•°, ä»¥ä¸‹å‡½æ•°æ˜¯è·å–urlä¸­å‚æ•°çš„å…¬æœ‰æ–¹æ³•, ç›´æ¥ä½¿ç”¨å³å¯123456789101112131415161718function getRequest() &#123; var url = window.location.search; //è·å–urlä¸­&quot;?&quot;ç¬¦åçš„å­—ä¸² var theRequest = new Object(); if (url.indexOf(&quot;?&quot;) != -1) &#123; var str = url.substr(1); strs = str.split(&quot;&amp;&quot;); for(var i = 0; i &lt; strs.length; i ++) &#123; //å°±æ˜¯è¿™å¥çš„é—®é¢˜ theRequest[strs[i].split(&quot;=&quot;)[0]]=decodeURI(strs[i].split(&quot;=&quot;)[1]); //ä¹‹å‰ç”¨äº†unescape() //æ‰ä¼šå‡ºç°ä¹±ç  &#125; &#125; return theRequest; &#125; var arr = getRequest(); var name = arr[&#x27;name&#x27;]; // urlä¸­çš„å‚æ•°åç§° var time = arr[&#x27;time&#x27;];","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://renjunda.ren/tags/js/"}]},{"title":"WebSocketè¿æ¥å¤±è´¥ï¼ŒæŠ¥é”™400","slug":"WebSocketè¿æ¥å¤±è´¥ï¼ŒæŠ¥é”™400/WebSocketè¿æ¥å¤±è´¥ï¼ŒæŠ¥é”™400","date":"2022-04-01T08:09:17.000Z","updated":"2022-04-01T08:21:19.994Z","comments":true,"path":"lxb/14b1fd40.html","link":"","permalink":"https://renjunda.ren/lxb/14b1fd40.html","excerpt":"","text":"WebSocket è¿æ¥å¤±è´¥ï¼ŒæŠ¥é”™400 WebSocketæ¡æ‰‹æœŸé—´å‡ºé”™ï¼Œå“åº”ç ï¼š400ã€‚å‡ºç°åŸå› ï¼šå¯èƒ½ä½ çš„åº”ç”¨ç¨‹åºç‰ˆæœ¬ä½äºnginx æˆ‘çš„è§£å†³æ–¹å¼ï¼šå‘Šè¯‰nginxåœ¨å’ŒæœåŠ¡ç«¯é€šä¿¡çš„æ—¶å€™ï¼Œä½¿ç”¨http&#x2F;1.1ï¼Œå¹¶ä¸”Nginxå½“æƒ³è¦ä½¿ç”¨WebSocketæ—¶ç”±æµè§ˆå™¨é€šè¿‡HTTPå‘èµ·çš„Upgradeè¯·æ±‚åšå‡ºå“åº”ã€‚å³ï¼šåœ¨nginxçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹å¯¹åº”çš„websocketä»£ç†æœåŠ¡ã€‚å¦‚å›¾ï¼š ä¿®æ”¹å®Œé…ç½®è¿˜éœ€è¦å†Djangoé¡¹ç›®ä¸­çš„settingsä¸­é…ç½®websocket 1WEBSOCKET_FACTORY_CLASS = &#x27;dwebsocket.backends.uwsgi.factory.uWsgiWebSocketFactory&#x27; æœ€åé‡å¯nginx&amp;é¡¹ç›®","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://renjunda.ren/tags/nginx/"}]},{"title":"layuiå¼¹å‡ºå±‚æ—¶é—´æ§ä»¶é—ªé€€è§£å†³æ–¹æ¡ˆ","slug":"layuiå¼¹å‡ºå±‚æ—¶é—´æ§ä»¶é—ªé€€è§£å†³æ–¹æ¡ˆ","date":"2021-04-01T07:53:58.000Z","updated":"2022-04-01T08:06:18.108Z","comments":true,"path":"lxb/d2cfb4a5.html","link":"","permalink":"https://renjunda.ren/lxb/d2cfb4a5.html","excerpt":"","text":"ä½¿ç”¨layuiæ—¶é—´ç»„ä»¶æœ‰é—ªé€€é—®é¢˜,åªéœ€è¦åœ¨å®ä¾‹åŒ–æ—¶æ·»åŠ ç‚¹å‡»äº‹ä»¶é—®é¢˜å°±å¯ä»¥è§£å†³äº†,å…·ä½“é…ç½®å¦‚ä¸‹123456laydate.render(&#123; elem: &#x27;&#x27;, range: &#x27;åˆ°&#x27;, type: &#x27;datetime&#x27;, trigger: &#x27;click&#x27;, # æ–°å¢ç‚¹å‡»äº‹ä»¶ &#125;);","categories":[],"tags":[{"name":"layui","slug":"layui","permalink":"https://renjunda.ren/tags/layui/"}]},{"title":"Djangoæ¨¡ç³ŠæŸ¥è¯¢å’ŒæŸ¥è¯¢æ“ä½œ","slug":"Djangoæ¨¡ç³ŠæŸ¥è¯¢å’ŒæŸ¥è¯¢æ“ä½œ","date":"2021-03-23T05:59:08.000Z","updated":"2022-03-30T10:00:02.501Z","comments":true,"path":"lxb/undefined.html","link":"","permalink":"https://renjunda.ren/lxb/undefined.html","excerpt":"","text":"Django ORM æ¨¡ç³ŠæŸ¥è¯¢å’ŒæŸ¥è¯¢æ“ä½œquerysetä¸­æ”¯æŒé“¾å¼æ“ä½œ12book=Book.objects.all().order_by(&#x27;-nid&#x27;).first()åªè¦è¿”å›çš„æ˜¯querysetå¯¹è±¡å°±å¯ä»¥è°ƒç”¨å…¶ä»–çš„æ–¹æ³•,ç›´åˆ°è¿”å›çš„æ˜¯å¯¹è±¡æœ¬èº« æ¨¡ç³ŠæŸ¥è¯¢å¸¸ç”¨çš„æ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738394041424344å¤§äºã€å¤§äºç­‰äº:__gt å¤§äº&gt;__gte å¤§äºç­‰äº&gt;=Student.objects.filter(age__gt=10) // æŸ¥è¯¢å¹´é¾„å¤§äº10å²çš„å­¦ç”ŸStudent.objects.filter(age__gte=10) // æŸ¥è¯¢å¹´é¾„å¤§äºç­‰äº10å²çš„å­¦ç”Ÿlike:__exact ç²¾ç¡®ç­‰äº like &#x27;aaa&#x27;__iexact ç²¾ç¡®ç­‰äº å¿½ç•¥å¤§å°å†™ ilike &#x27;aaa&#x27;__contains åŒ…å« like &#x27;%aaa%&#x27;__icontains åŒ…å«,å¿½ç•¥å¤§å°å†™ ilike &#x27;%aaa%&#x27;ï¼Œä½†æ˜¯å¯¹äºsqliteæ¥è¯´ï¼Œcontainsçš„ä½œç”¨æ•ˆæœç­‰åŒäºicontainsin:__inæŸ¥è¯¢å¹´é¾„åœ¨æŸä¸€èŒƒå›´çš„å­¦ç”ŸStudent.objects.filter(age__in=[10, 20, 30])is null / is not nullStudent.objects.filter(name__isnull=True) // æŸ¥è¯¢ç”¨æˆ·åä¸ºç©ºçš„å­¦ç”ŸStudent.objects.filter(name__isnull=False) // æŸ¥è¯¢ç”¨æˆ·åä¸ä¸ºç©ºçš„å­¦ç”Ÿä¸ç­‰äº/ä¸åŒ…å«äºï¼šStudent.objects.filter().excute(age=10) // æŸ¥è¯¢å¹´é¾„ä¸ä¸º10çš„å­¦ç”ŸStudent.objects.filter().excute(age__in=[10, 20]) // æŸ¥è¯¢å¹´é¾„ä¸åœ¨ [10, 20] çš„å­¦ç”Ÿå…¶ä»–å¸¸ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼š__startswith ä»¥â€¦å¼€å¤´__istartswith ä»¥â€¦å¼€å¤´ å¿½ç•¥å¤§å°å†™__endswith ä»¥â€¦ç»“å°¾__iendswith ä»¥â€¦ç»“å°¾ï¼Œå¿½ç•¥å¤§å°å†™__range åœ¨â€¦èŒƒå›´å†…__year æ—¥æœŸå­—æ®µçš„å¹´ä»½__month æ—¥æœŸå­—æ®µçš„æœˆä»½__day æ—¥æœŸå­—æ®µçš„æ—¥Book.objects.filter(create_time__year=2019, create_time__month=4).all()","categories":[],"tags":[]},{"title":"æ€æ ·å®ç°å›¾ç‰‡éªŒè¯ç ","slug":"æ€æ ·å®ç°å›¾ç‰‡éªŒè¯ç ","date":"2020-05-31T06:22:05.000Z","updated":"2022-04-02T07:35:15.805Z","comments":true,"path":"lxb/49696.html","link":"","permalink":"https://renjunda.ren/lxb/49696.html","excerpt":"","text":"åˆ©ç”¨django + vueå®ç°å›¾ç‰‡éªŒè¯ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192import uuidimport randomfrom captcha.image import ImageCaptchafrom io import BytesIOimport redis# åˆ›å»ºrediså®ä¾‹r = redis.Redis(host=&#x27;127.0.0.1&#x27;, port=6379, password=&#x27;&#x27;,decode_responses=True)# å°è£…ä¸€ä¸ªå‡½æ•°,æ­¤å‡½æ•°ç”¨äºç”Ÿæˆå›¾ç‰‡éªŒè¯ç ä¸­çš„æ•°å­—æˆ–å­—æ¯def random_code(num=4): # num æ˜¯ç”Ÿæˆéšæœºçš„æ•°é‡ é»˜è®¤ä¸º4 str__a_z = [chr(num) for num in range(97, 123)] str__A_Z = [chr(num) for num in range(65, 91)] num_0_9 = [str(num) for num in range(0, 10)] return &#x27;&#x27;.join(random.sample(str__a_z + str__A_Z + num_0_9, num))# æ­¤å‡½æ•°ç”¨äºç”Ÿæˆå›¾ç‰‡def make_verify_image(code_str, uuid=None): # ä¿å­˜éªŒè¯ç åˆ°redisä¸­,å¹¶ä¸”è®¾ç½®è¿‡æœŸæ—¶é—´ r.set(uuid, code_str, 60) # ç”ŸæˆéªŒè¯ç å›¾ç‰‡ img = ImageCaptcha().generate_image(code_str) # å›¾ç‰‡ä¸ä¼šæ°¸ä¹…å­˜å‚¨ï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­å­˜å‚¨å³å¯ # æŠŠImageå¯¹è±¡å†™å…¥åˆ°IOæµä¸­ out = BytesIO() # æ–‡ä»¶æµå¯¹è±¡æ‰“å¼€åœ¨å†…å­˜ä¸­ img.save(out, &#x27;jpeg&#x27;) return out.getvalue()# vueä»£ç  generate_image_code() &#123; axios(&#123; url:this.base_url + &#x27;userapp/uuid/&#x27;, &#125;).then(res=&gt;&#123; console.log(res.data) this.uuid = res.data this.image_code_url = this.base_url +&quot;userapp/&quot; + &#x27;tupian/&#x27; + this.uuid +&#x27;/&#x27; &#125;) &#125;, UUId() &#123; axios(&#123; url:this.base_url + &#x27;userapp/uuid/&#x27;, &#125;).then(res=&gt;&#123; console.log(res.data) this.uuid = res.data this.image_code_url = this.base_url +&quot;userapp/&quot; + &#x27;tupian/&#x27; + this.uuid +&#x27;/&#x27; &#125;) &#125;, jc() &#123; axios(&#123; url:this.base_url + &#x27;userapp/xy/&#x27;, method:&#x27;post&#x27;, data:&#123;&#x27;uuid&#x27;:this.uuid,&#x27;code&#x27;:this.check&#125; &#125;).then(res=&gt;&#123; console.log(res.data) if(res.data.code == 200) &#123; this.check_img = true this.error_image_code = res.data.msg &#125; if(res.data.code==500) &#123; this.check_img = false this.error_image_code = res.data.msg &#125; &#125;) &#125;,class GenerateUUID(APIView): def get(self, request): # æ³¨å†Œé¡µé¢ æŒ‚è½½æ—¶è¯·æ±‚æ¥å£ è¿”å›ä¸€ä¸ªuuid rt = random_code() # print(rt) return Response(str(uuid.uuid1()))class Generateimg(APIView): &#x27;&#x27;&#x27; è¿”å›å‰ç«¯éªŒè¯ç å›¾ç‰‡ &#x27;&#x27;&#x27; def get(self, request, uuid): # 2.åˆ›å»ºéšæœºæ•° code = random_code() # 3.ç”ŸæˆéªŒè¯ç å›¾ç‰‡ image = make_verify_image(code, uuid) # 4.è¿”å›å›¾ç‰‡ return HttpResponse(image, content_type=&#x27;image/jpeg&#x27;)","categories":[],"tags":[{"name":"Django","slug":"Django","permalink":"https://renjunda.ren/tags/Django/"}]},{"title":"æ€æ ·è®¾ç½®flaskåå°ç®¡ç†","slug":"æ€æ ·è®¾ç½®flaskåå°ç®¡ç†","date":"2019-06-03T02:44:47.000Z","updated":"2022-04-08T03:39:59.325Z","comments":true,"path":"lxb/25760.html","link":"","permalink":"https://renjunda.ren/lxb/25760.html","excerpt":"","text":"å¿«é€Ÿå¼€å‘åå°flask-admin Flask-adminä¹Ÿæ˜¯æœ‰å±€é™æ€§çš„,ä»–åªé€‚åˆå¼€å‘å°å‹å¿«é€Ÿåº”ç”¨,ä¸é€‚åˆé‚£ç§å¤§å‹å¹¶å‘æ€§é«˜,é€»è¾‘å¤æ‚çš„åº”ç”¨. é¦–å…ˆ,å¯¹äºå¤§å‹åº”ç”¨éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„,åŠ å¿«è®¿é—®é€Ÿåº¦,è€Œä¸”åç«¯è£…é…,å°¤å…¶æ˜¯è¿™ç§åŠ¨æ€ç”Ÿæˆçš„é€Ÿåº¦æ›´æ…¢ æµç¨‹ä»‹ç»1234567891011121314# å¯¼å…¥adminæ‰©å±•åŒ…from flask_admin import Admin# åˆ›å»ºå®ä¾‹å¯¹è±¡ è¿™é‡Œçš„nameå°±æ˜¯åå°çš„æ ‡é¢˜admin = Admin(app, name=&#x27;ç®¡ç†åå°&#x27;, template_mode=&#x27;bootstrap3&#x27;) # å¯¼å…¥ModelViewfrom flask_admin.contrib.sqla import ModelView# æ³¨å†Œmodel publicæ˜¯å£°æ˜çš„modelç±»å db.session,æ˜¯åœ¨configä¸­å£°æ˜çš„æ•°æ®åº“è¿æ¥ nameæ˜¯å°æ ‡é¢˜admin.add_view(ModelView(public, db.session,name=&#x27;test&#x27;))# æ±‰åŒ– å¼•å…¥Flask-BabeIExfrom flask_babelex import Babelbabel = Babel(app)app.config[&#x27;BABEL_DEFAULT_LOCALE&#x27;] = &#x27;zh_CN&#x27; å¤§åŠŸå‘Šæˆ!!","categories":[],"tags":[{"name":"Flask","slug":"Flask","permalink":"https://renjunda.ren/tags/Flask/"}]},{"title":"éƒ¨ç½²æ—¶djangoæ²¡æœ‰æ ·å¼è§£å†³æ–¹æ¡ˆ","slug":"éƒ¨ç½²æ—¶djangoæ²¡æœ‰æ ·å¼è§£å†³æ–¹æ¡ˆ","date":"2018-08-01T00:08:09.000Z","updated":"2022-04-02T07:44:04.381Z","comments":true,"path":"lxb/17098.html","link":"","permalink":"https://renjunda.ren/lxb/17098.html","excerpt":"","text":"æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²è‡ªå·±çš„é¡¹ç›®æ—¶,å‘ç°djangoæ²¡æœ‰æ ·å¼,è¿™æ—¶æˆ‘ä»¬éœ€è¦æ”¶é›†é™æ€èµ„æºæ¥è¿›è¡Œè§£å†³. åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªstaticæ–‡ä»¶å¤¹ åœ¨settingsä¸­æ·»åŠ ä»¥ä¸‹é…ç½®: 1STATIC_ROOT = os.path.join(BASE_DIR, &#x27;static&#x27;) ç„¶ååœ¨nginxé…ç½®ä¸­æ·»åŠ  123location /static/ &#123; root /home/myproject/WorkerOrder; # é¡¹ç›®çš„ç»å¯¹è·¯å¾„&#125; é…ç½®å®Œæˆåæ‰§è¡Œpython manage.py collectstatic é‡æ–°å¯åŠ¨nginxå®Œæ¯•","categories":[],"tags":[]}],"categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://renjunda.ren/tags/Python/"},{"name":"js","slug":"js","permalink":"https://renjunda.ren/tags/js/"},{"name":"Linux","slug":"Linux","permalink":"https://renjunda.ren/tags/Linux/"},{"name":"Mysql","slug":"Mysql","permalink":"https://renjunda.ren/tags/Mysql/"},{"name":"python","slug":"python","permalink":"https://renjunda.ren/tags/python/"},{"name":"Django","slug":"Django","permalink":"https://renjunda.ren/tags/Django/"},{"name":"nginx","slug":"nginx","permalink":"https://renjunda.ren/tags/nginx/"},{"name":"layui","slug":"layui","permalink":"https://renjunda.ren/tags/layui/"},{"name":"Flask","slug":"Flask","permalink":"https://renjunda.ren/tags/Flask/"}]}